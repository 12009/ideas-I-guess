参考链接

- https://blog.csdn.net/v_JULY_v/article/details/6279498



# 内容格式

- 问题
- 自己的思考
- 解决方案
- 后续评论



# 




## 问题-1

### 问题

- 如何实现一个可自动调整大小的动态数组 



### 自己的思考

| 封装一个类，增大或减小数组大小时，都是内部新分配一个数组。然后转移数组内容 |
| ------------------------------------------------------------ |
|                                                              |
|                                                              |
|                                                              |

### 解决方案
| 封装一个类，增大或减小数组大小时，都是内部新分配一个数组。然后转移数组内容 |
| ------------------------------------------------------------ |
|                                                              |
|                                                              |
|                                                              |


### 后续评论
| 封装一个类，增大或减小数组大小时，都是内部新分配一个数组。然后转移数组内容 |
| ------------------------------------------------------------ |
|                                                              |
|                                                              |
|                                                              |





## 问题-2

### 问题

- 如何正确运行并锁住代码段。在并发情况下

### 自己的思考

| 关键字syn和static                                            |
| ------------------------------------------------------------ |
| 代码执行流程应该是一条直线。这样并发的时候只是增加许多直线。而不会出现新问题 |
| 先设计好要并发运行的对象。尽量集成在这个对象里面。方法直接要耦合。还有就是不要出现互相创建对象问题。容易产生内存溢出问题 |
| 注意，syn是锁住对象，而不是单纯的代码行                      |

### 解决方案
| https://blog.csdn.net/javazejian/article/details/72828483 |
| --------------------------------------------------------- |
|                                                           |
|                                                           |
|                                                           |


### 后续评论
|      |
| ---- |
|      |
|      |
|      |

## 问题-3

### 问题

- **海量日志数据，提取出某日访问百度次数最多的那个IP** 

### 解决方案

- 先抽取访问百度IP的日志
- 根据IP的数据结构，分析方案。hash算法和hashmap的运用
- IP是32位的，最多有个2^32个IP
- hash映射法
- hash算法：模1000。大文件分解成1000个小文件
- hashmap数据结构：从每个小文件找出频率最大的一个。然后再从1000个文件从选出最大一个ip



## 问题-4

### 问题

- **搜索引擎会通过日志文件把用户每次检索使用的所有检索串都记录下来，每个查询串的长度为1-255字节** 
  - 假设目前有一千万个记录（这些查询串的重复度比较高，虽然总数是1千万，但如果除去重复后，不超过3百万个。一个查询串的重复度越高，说明查询它的用户越多，也就是越热门。），请你统计最热门的10个查询串，要求使用的内存不能超过1G。 

### 解决方案

- 分析数据结构，1G可以存放300万经过压缩的记录
- hash+堆排序
- 将记录进行hash压缩，并完成统计
- 堆计算k个数，然后遍历整个数据



## 问题-5

### 问题

- **有一个1G大小的一个文件，里面每一行是一个词，词的大小不超过16字节，内存限制大小是1M。返回频数最高的100个词** 

### 解决方案

- 分析数据结构，1M可以存放16字节经过压缩的记录
- hash+堆排序+hashmap
- 顺序读文件中，对于每个词x，取hash(x)%5000，然后按照该值存到5000个小文件（记为x0,x1,...x4999）中。这样每个文件大概是200k左右 
- 如果其中的有的文件超过了1M大小，还可以按照类似的方法继续往下分，直到分解得到的小文件的大小都不超过1M 
-   对每个小文件，统计每个文件中出现的词以及相应的频率（可以采用trie树/hash_map等），并取出出现频率最大的100个词（可以用含100个结点的最小堆），并把100个词及相应的频率存入文件，这样又得到了5000个文件。下一步就是把这5000个文件进行归并（类似与归并排序）的过程了。 



## 问题-6

### 问题

- **给定a、b两个文件，各存放50亿个url，每个url各占64字节，内存限制是4G，让你找出a、b文件共同的url** 

### 解决方案

- hash分类
- 都对a,b两个文件进行相同hash算法。分1000个文件。不同文件，url肯定不同
- 再对每个文件继续以上操作
-  Bloom filter 
- 直接映射到4G的位字节



## 问题-7

### 问题

- **在2.5亿个整数中找出不重复的整数，注，内存不足以容纳这2.5亿个整数** 

### 解决方案

- 方案1：采用2-Bitmap（每个数分配2bit，00表示不存在，01表示出现一次，10表示多次，11无意义）进行，共需内存2^32 * 2 bit=1 GB内存，还可以接受。然后扫描这2.5亿个整数，查看Bitmap中相对应位，如果是00变01，01变10，10保持不变。所描完事后，查看bitmap，把对应位是01的整数输出即可。 
-  方案2：也可采用与第1题类似的方法，进行划分小文件的方法。然后在小文件中找出不重复的整数，并排序。然后再进行归并，注意去除重复的元素。 





## 问题-8

### 问题

- **一个文本文件，大约有一万行，每行一个词，要求统计出其中最频繁出现的前10个词，请给出思想，给出时间复杂度分析** 

### 解决方案

- 这题是考虑时间效率。用trie树统计每个词出现的次数，时间复杂度是O(n*le)（le表示单词的平准长度）。然后是找出出现最频繁的前10个词，可以用堆来实现，前面的题中已经讲到了，时间复杂度是O(n*lg10)。所以总的时间复杂度，是O(n*le)与O(n*lg10)中较大的哪一个。 

## 问题-9

### 问题

- **5亿个int找它们的中位数** 

### 解决方案

- 鸽巢原理 
- 首先我们将int划分为2^16个区域，然后读取数据统计落到各个区域里的数的个数，之后我们根据统计结果就可以判断中位数落到那个区域，同时知道这个区域中的第几大数刚好是中位数。然后第二次扫描我们只统计落在这个区域中的那些数就可以了。 



## 问题-模板1

### 问题

|      |
| ---- |
|      |
|      |
|      |

### 自己的思考

|      |
| ---- |
|      |
|      |
|      |

### 解决方案
|      |
| ---- |
|      |
|      |
|      |


### 后续评论
|      |
| ---- |
|      |
|      |
|      |

## 问题-模板2
### 问题

- 

### 解决方案

- 



